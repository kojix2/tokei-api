<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    html, body { margin:0; padding:0; }
    body { width:1200px; height:630px; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; background:#0B1020; color:#E5E7EB; }
    .card { width:1200px; height:630px; padding:48px 56px; box-sizing:border-box; display:flex; flex-direction:column; gap:28px; }
    .title { font-size:44px; font-weight:800; color:#F3F4F6; }
    .subtitle { font-size:22px; color:#9CA3AF; }
    .graph { background:#0F172A; border:1px solid #1F2937; border-radius:16px; padding:24px; }
    .row { display:grid; grid-template-columns: 200px 1fr 230px; align-items:center; gap:16px; margin:10px 0; }
    .label { font-size:24px; color:#E5E7EB; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .bar { height:28px; background:#111827; border-radius:999px; overflow:hidden; border:1px solid #1F2937; }
    .fill { height:100%; border-radius:999px; }
    .value { font-size:22px; color:#9CA3AF; text-align:right; }
    .footer { font-size:18px; color:#6B7280; }
  </style>
</head>
<body>
  <div class="card">
    <div class="title"><%= owner_repo %></div>
    <div class="subtitle">Programming Languages (by tokei code lines)</div>
    <div class="graph">
      <% if languages.empty? %>
        <div style='color:#9CA3AF; font-size:22px;'>No data</div>
      <% else %>
        <% total = total_code %>
        <% languages.each_with_index do |h, i| %>
          <% pct = ((h[:code].to_f / total.to_f) * 100).round(1) %>
          <% width = (pct * 10).round(1) %>
          <% color = palette[i % palette.size] %>
          <div class="row">
            <div class="label"><%= h[:name] %></div>
            <div class="bar">
              <div class="fill" style="width: <%= width %>px; background: <%= color %>;"></div>
            </div>
            <div class="value"><%= h[:code] %> lines (<%= pct %>%)</div>
          </div>
        <% end %>
      <% end %>
    </div>
    <div class="footer">Generated by tokei-api â€¢ <%= generated_at %></div>
  </div>
</body>
</html>
